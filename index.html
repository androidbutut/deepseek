<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js AI Assistant</title>
    <link rel="stylesheet" href="styles/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-cube"></i>
                    <span>3D AI Assistant</span>
                </div>
                <button class="new-chat-btn" id="newChatBtn">
                    <i class="fas fa-plus"></i>
                    New Chat
                </button>
            </div>

            <div class="chat-history">
                <div class="history-section">
                    <h3>Today</h3>
                    <div class="history-item active">
                        <i class="fas fa-message"></i>
                        <span>Three.js Scene Optimization</span>
                    </div>
                    <div class="history-item">
                        <i class="fas fa-message"></i>
                        <span>GLTF Model Loading</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span>Developer</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="header-left">
                    <button class="sidebar-toggle" id="sidebarToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1>Three.js Assistant</h1>
                </div>
                <div class="header-actions">
                    <button class="header-btn" id="preview3DBtn">
                        <i class="fas fa-cube"></i>
                        Preview 3D
                    </button>
                    <button class="header-btn" id="exportBtn">
                        <i class="fas fa-download"></i>
                        Export
                    </button>
                </div>
            </div>

            <!-- Chat Container -->
            <div class="chat-container">
                <div class="welcome-section" id="welcomeSection">
                    <div class="welcome-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h2>How can I help with your 3D project today?</h2>
                    <div class="quick-actions">
                        <div class="quick-action" data-prompt="Generate a basic Three.js scene with rotating cube">
                            <i class="fas fa-cube"></i>
                            <span>Basic Scene</span>
                        </div>
                        <div class="quick-action" data-prompt="Optimize Three.js performance for multiple objects">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Performance Tips</span>
                        </div>
                        <div class="quick-action" data-prompt="How to load and display GLTF models in Three.js">
                            <i class="fas fa-shapes"></i>
                            <span>GLTF Loading</span>
                        </div>
                        <div class="quick-action" data-prompt="Create custom shaders for Three.js materials">
                            <i class="fas fa-palette"></i>
                            <span>Shader Help</span>
                        </div>
                    </div>
                </div>

                <div class="messages-container" id="messagesContainer"></div>

                <!-- Input Area -->
                <div class="input-container">
                    <div class="input-actions">
                        <button class="action-btn" id="upload3DBtn" title="Upload 3D File">
                            <i class="fas fa-file-upload"></i>
                        </button>
                        <button class="action-btn" id="generateCodeBtn" title="Generate Code">
                            <i class="fas fa-code"></i>
                        </button>
                        <button class="action-btn" id="optimizeBtn" title="Optimize Code">
                            <i class="fas fa-bolt"></i>
                        </button>
                        <button class="action-btn" id="analyzeBtn" title="Analyze Performance">
                            <i class="fas fa-chart-line"></i>
                        </button>
                        <div class="context-selector">
                            <select id="contextSelect">
                                <option value="threejs">Three.js</option>
                                <option value="webgl">WebGL</option>
                                <option value="blender">Blender</option>
                                <option value="shaders">Shaders</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="input-wrapper">
                        <textarea 
                            id="messageInput" 
                            placeholder="Ask about Three.js, WebGL, 3D modeling..." 
                            rows="1"
                        ></textarea>
                        <button class="send-btn" id="sendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    
                    <div class="input-footer">
                        <div class="file-info" id="fileInfo"></div>
                        <div class="suggestions">
                            <span class="suggestion-tag" data-prompt="Show me how to add lighting to a scene">Lighting</span>
                            <span class="suggestion-tag" data-prompt="How to implement camera controls">Camera Controls</span>
                            <span class="suggestion-tag" data-prompt="Best practices for texture loading">Textures</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3D Preview Modal -->
        <div class="modal" id="previewModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>3D Preview</h3>
                    <button class="close-btn" id="closePreview">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="threePreview"></div>
                    <div class="preview-controls">
                        <button class="control-btn" id="rotateToggle">
                            <i class="fas fa-sync"></i> Auto Rotate
                        </button>
                        <button class="control-btn" id="resetView">
                            <i class="fas fa-home"></i> Reset View
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- File Upload Modal -->
        <div class="modal" id="uploadModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Upload 3D File</h3>
                    <button class="close-btn" id="closeUpload">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="upload-area" id="uploadArea">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Drag & drop your 3D file here</p>
                        <span>Supported formats: GLTF, GLB, OBJ, FBX</span>
                        <input type="file" id="fileInput" accept=".gltf,.glb,.obj,.fbx,.stl,.ply" hidden>
                        <button class="browse-btn" id="browseBtn">Browse Files</button>
                    </div>
                    <div class="analysis-options">
                        <label>Analysis Type:</label>
                        <select id="analysisType">
                            <option value="performance">Performance</option>
                            <option value="compatibility">Compatibility</option>
                            <option value="optimization">Optimization</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="scripts/chat.js"></script>
    <script src="scripts/three-preview.js"></script>
    <script src="scripts/app.js"></script>
</body>
</html>